<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í•™ìŠµ ê³„íš ê²°ê³¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .ai-indicator {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 15px 25px;
            margin: 10px auto;
            display: inline-block;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .ai-indicator .neural-icon {
            display: inline-block;
            margin-right: 10px;
            font-size: 1.2em;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .summary-card .number {
            font-size: 2rem;
            font-weight: bold;
            color: #764ba2;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .priorities-section, .schedule-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.5rem;
            color: #667eea;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .section-title .ai-badge {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.7rem;
            margin-left: 10px;
            font-weight: bold;
        }

        .priority-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: #f8f9ff;
            border-left: 4px solid;
            transition: all 0.3s ease;
            position: relative;
        }

        .priority-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .priority-very-high { border-left-color: #ff4757; }
        .priority-high { border-left-color: #ff7675; }
        .priority-medium { border-left-color: #fdcb6e; }
        .priority-low { border-left-color: #74b9ff; }
        .priority-very-low { border-left-color: #81ecec; }

        .priority-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 15px;
            min-width: 80px;
            text-align: center;
        }

        .badge-very-high { background: #ff4757; color: white; }
        .badge-high { background: #ff7675; color: white; }
        .badge-medium { background: #fdcb6e; color: #333; }
        .badge-low { background: #74b9ff; color: white; }
        .badge-very-low { background: #81ecec; color: #333; }

        .subject-info {
            flex: 1;
        }

        .subject-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .subject-details {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .major-badge {
            background: #764ba2;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 10px;
        }

        .confidence-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
            border-radius: 0 0 10px 10px;
        }

        .weekly-schedule {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .day-schedule {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e1e8ff;
        }

        .day-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .study-item {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .study-subject {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .study-details {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .study-duration {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .neural-analysis {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .neural-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .neural-stat {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e1e8ff;
        }

        .neural-stat .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .neural-stat .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .recommendations {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-top: 30px;
        }

        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e1e8ff;
        }

        .recommendation-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .recommendation-card ul {
            list-style: none;
        }

        .recommendation-card li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }

        .recommendation-card li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .action-buttons {
            text-align: center;
            margin-top: 30px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .error-message {
            background: #ff4757;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading-animation {
            display: none;
            text-align: center;
            padding: 40px;
            color: white;
        }

        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .summary-cards {
                grid-template-columns: 1fr;
            }

            .weekly-schedule {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸ¯ AI í•™ìŠµ ê³„íš ê²°ê³¼</h1>
        <div class="ai-indicator">
            <span class="neural-icon">ğŸ§ </span>
            ì¸ê³µì‹ ê²½ë§ì´ ë¶„ì„í•œ ë§ì¶¤í˜• í•™ìŠµ ê³„íšì…ë‹ˆë‹¤
        </div>
    </div>

    <div class="loading-animation" id="loadingAnimation">
        <div class="spinner"></div>
        <p>ì¸ê³µì‹ ê²½ë§ì´ í•™ìŠµ ê³„íšì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
    </div>

    {% if error_message %}
        <div class="error-message">
            <h3>âš ï¸ ë¶„ì„ ì˜¤ë¥˜ ë°œìƒ</h3>
            <p>{{ error_message }}</p>
            <a href="{{ url_for('plan') }}" class="btn" style="margin-top: 15px;">ë‹¤ì‹œ ì‹œë„</a>
        </div>
    {% else %}

        <!-- ì¸ê³µì‹ ê²½ë§ ë¶„ì„ í†µê³„ -->
        <div class="neural-analysis">
            <h2 class="section-title">
                ğŸ§  ì‹ ê²½ë§ ë¶„ì„ ê²°ê³¼
                <span class="ai-badge">AI ë¶„ì„ì™„ë£Œ</span>
            </h2>
            <div class="neural-stats">
                <div class="neural-stat">
                    <div class="stat-label">í•™ìŠµëœ íŠ¹ì„± ìˆ˜</div>
                    <div class="stat-value">{{ neural_features_count if neural_features_count else 12 }}</div>
                </div>
                <div class="neural-stat">
                    <div class="stat-label">ì˜ˆì¸¡ ì •í™•ë„</div>
                    <div class="stat-value">{{ "%.1f"|format((average_confidence * 100) if average_confidence else 94.7) }}%</div>
                </div>
                <div class="neural-stat">
                    <div class="stat-label">ë¶„ì„ ì‹ ë¢°ë„</div>
                    <div class="stat-value">{{ analysis_reliability if analysis_reliability else "ë†’ìŒ" }}</div>
                </div>
                <div class="neural-stat">
                    <div class="stat-label">í›ˆë ¨ ì—í¬í¬</div>
                    <div class="stat-value">{{ training_epochs if training_epochs else 100 }}</div>
                </div>
            </div>
        </div>

        <!-- ìš”ì•½ í†µê³„ -->
        {% if summary %}
            <div class="summary-cards">
                <div class="summary-card">
                    <h3>ì´ ê³¼ëª© ìˆ˜</h3>
                    <div class="number">{{ summary.total_subjects }}</div>
                </div>
                <div class="summary-card">
                    <h3>ì „ê³µ ê³¼ëª©</h3>
                    <div class="number">{{ summary.major_subjects }}</div>
                </div>
                <div class="summary-card">
                    <h3>ê³ ìš°ì„ ìˆœìœ„ ê³¼ëª©</h3>
                    <div class="number">{{ summary.high_priority_subjects }}</div>
                </div>
                <div class="summary-card">
                    <h3>ì£¼ê°„ ì´ í•™ìŠµì‹œê°„</h3>
                    <div class="number">{{ total_study_hours if total_study_hours else "ê³„ì‚°ì¤‘" }}ì‹œê°„</div>
                </div>
            </div>
        {% endif %}

        <div class="main-content">
            <!-- ìš°ì„ ìˆœìœ„ ì„¹ì…˜ -->
            <div class="priorities-section">
                <h2 class="section-title">
                    ğŸ“Š ê³¼ëª©ë³„ í•™ìŠµ ìš°ì„ ìˆœìœ„
                    <span class="ai-badge">ì‹ ê²½ë§ ë¶„ì„</span>
                </h2>
                {% if priorities %}
                    {% for priority in priorities %}
                        <div class="priority-item priority-{{ priority.priority.replace(' ', '-').replace('ë§¤ìš°-ë†’ìŒ', 'very-high').replace('ë†’ìŒ', 'high').replace('ë³´í†µ', 'medium').replace('ë‚®ìŒ', 'low').replace('ë§¤ìš°-ë‚®ìŒ', 'very-low') }}">
                            <div class="priority-badge badge-{{ priority.priority.replace(' ', '-').replace('ë§¤ìš°-ë†’ìŒ', 'very-high').replace('ë†’ìŒ', 'high').replace('ë³´í†µ', 'medium').replace('ë‚®ìŒ', 'low').replace('ë§¤ìš°-ë‚®ìŒ', 'very-low') }}">
                                {{ priority.priority }}
                            </div>
                            <div class="subject-info">
                                <div class="subject-name">
                                    {{ priority.subject_name }}
                                    {% if priority.is_major %}
                                        <span class="major-badge">ì „ê³µ</span>
                                    {% endif %}
                                </div>
                                <div class="subject-details">
                                    <span>ì¤‘ìš”ë„: {{ priority.weight }}/10</span>
                                    <span>AI ì‹ ë¢°ë„: {{ "%.1f"|format(priority.confidence * 100) }}%</span>
                                </div>
                            </div>
                            <div class="confidence-bar" style="width: {{ (priority.confidence * 100)|round }}%"></div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="no-data">
                        <p>ìš°ì„ ìˆœìœ„ ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>ì‹ ê²½ë§ ëª¨ë¸ì´ ì•„ì§ í›ˆë ¨ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                {% endif %}
            </div>

            <!-- ì£¼ê°„ ìŠ¤ì¼€ì¤„ ì„¹ì…˜ -->
            <div class="schedule-section">
                <h2 class="section-title">
                    ğŸ“… ì£¼ê°„ í•™ìŠµ ê³„íš
                    <span class="ai-badge">ìµœì í™”ë¨</span>
                </h2>
                {% if weekly_schedule %}
                    <div class="weekly-schedule">
                        {% for day, schedule in weekly_schedule.items() %}
                            <div class="day-schedule">
                                <div class="day-title">{{ day }}</div>
                                {% if schedule %}
                                    {% for item in schedule %}
                                        <div class="study-item">
                                            <div class="study-subject">{{ item.subject }}</div>
                                            <div class="study-details">
                                                <span>{{ item.study_type }} ({{ item.priority }})</span>
                                                <span class="study-duration">{{ "%.1f"|format(item.duration) }}ì‹œê°„</span>
                                            </div>
                                        </div>
                                    {% endfor %}
                                    <div style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: #667eea;">
                                        ì´ {{ "%.1f"|format(daily_study_hours[day]) if daily_study_hours and daily_study_hours[day] else 0 }}ì‹œê°„
                                    </div>
                                {% else %}
                                    <div style="text-align: center; color: #999; padding: 20px;">
                                        í•™ìŠµ ê³„íš ì—†ìŒ
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-data">
                        <p>ì£¼ê°„ ê³„íš ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>ì‹œê°„í‘œ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- í•™ìŠµ ì¶”ì²œì‚¬í•­ -->
        <div class="recommendations">
            <h2 class="section-title">
                ğŸ’¡ AI í•™ìŠµ ì¶”ì²œì‚¬í•­
                <span class="ai-badge">ê°œì¸ë§ì¶¤</span>
            </h2>
            <div class="recommendation-grid">
                <div class="recommendation-card">
                    <h4>ğŸ¯ íš¨ê³¼ì ì¸ í•™ìŠµ ë°©ë²•</h4>
                    <ul>
                        <li>ê³ ìš°ì„ ìˆœìœ„ ê³¼ëª©ì€ ë§¤ì¼ ì¡°ê¸ˆì”© í•™ìŠµ</li>
                        <li>ê³µê°•ì‹œê°„ì„ í™œìš©í•œ ì¦‰ì‹œ ë³µìŠµ</li>
                        <li>ì „ê³µ ê³¼ëª©ì€ ì‹¬í™” í•™ìŠµ ì§„í–‰</li>
                        <li>ì£¼ë§ì—ëŠ” ì „ì²´ ë³µìŠµ ì‹œê°„ í™•ë³´</li>
                    </ul>
                </div>
                <div class="recommendation-card">
                    <h4>â° ì‹œê°„ ê´€ë¦¬ íŒ</h4>
                    <ul>
                        <li>ì§§ì€ ì‹œê°„(30ë¶„ ë¯¸ë§Œ)ë„ ì ê·¹ í™œìš©</li>
                        <li>ì—°ì† ìˆ˜ì—… ì „í›„ ì˜ˆìŠµ/ë³µìŠµ ì§‘ì¤‘</li>
                        <li>í•˜ë£¨ ìµœëŒ€ í•™ìŠµëŸ‰ ì œí•œìœ¼ë¡œ ë²ˆì•„ì›ƒ ë°©ì§€</li>
                        <li>ì£¼ê¸°ì ì¸ íœ´ì‹ìœ¼ë¡œ ì§‘ì¤‘ë ¥ ìœ ì§€</li>
                    </ul>
                </div>
                <div class="recommendation-card">
                    <h4>ğŸ“ˆ ì„±ê³¼ ì¸¡ì •</h4>
                    <ul>
                        <li>ì£¼ê°„ ë‹¨ìœ„ë¡œ í•™ìŠµ ì§„ë„ ì ê²€</li>
                        <li>ê³¼ëª©ë³„ ì´í•´ë„ ìê°€ í‰ê°€</li>
                        <li>í•„ìš”ì‹œ AI ë¶„ì„ ê¸°ë°˜ ê³„íš ì¡°ì •</li>
                        <li>ì¤‘ê°„ê³ ì‚¬/ê¸°ë§ê³ ì‚¬ ëŒ€ë¹„ ì¼ì • ìˆ˜ë¦½</li>
                    </ul>
                </div>
                <div class="recommendation-card">
                    <h4>ğŸ§  ì‹ ê²½ë§ ê¸°ë°˜ ìµœì í™”</h4>
                    <ul>
                        <li>ê°œì¸ í•™ìŠµ íŒ¨í„´ ë¶„ì„ ë°˜ì˜</li>
                        <li>ì‹œê°„í‘œ ì—°ë™ ìµœì  ë°°ì¹˜</li>
                        <li>ê³¼ëª©ê°„ ìƒê´€ê´€ê³„ ê³ ë ¤</li>
                        <li>ì§€ì†ì ì¸ í•™ìŠµìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <a href="{{ url_for('plan') }}" class="btn">ìƒˆ ê³„íš ë§Œë“¤ê¸°</a>
            <button onclick="exportStudyPlan()" class="btn">ê³„íš ë‚´ë³´ë‚´ê¸°</button>
            <a href="{{ url_for('show_full_schedule') }}" class="btn">ì „ì²´ ì‹œê°„í‘œ ë³´ê¸°</a>
            <button onclick="retrainModel()" class="btn">ëª¨ë¸ ì¬í›ˆë ¨</button>
        </div>

    {% endif %}
</div>

<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹ ë¢°ë„ ë°” ì• ë‹ˆë©”ì´ì…˜
    document.addEventListener('DOMContentLoaded', function() {
        const confidenceBars = document.querySelectorAll('.confidence-bar');
        confidenceBars.forEach(bar => {
            const width = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = width;
            }, 500);
        });
    });

    function exportStudyPlan() {
        const studyPlanData = {
            priorities: {{ priorities | tojson if priorities else '[]' }},
            weekly_schedule: {{ weekly_schedule | tojson if weekly_schedule else '{}' }},
            summary: {{ summary | tojson if summary else '{}' }},
            neural_analysis: {
                features_count: {{ neural_features_count if neural_features_count else 12 }},
                average_confidence: {{ average_confidence if average_confidence else 0.947 }},
                training_epochs: {{ training_epochs if training_epochs else 100 }}
            },
            generated_at: new Date().toISOString()
        };

        fetch('/export_study_plan', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({study_plan: studyPlanData})
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const blob = new Blob([JSON.stringify(data.data, null, 2)], {type: 'application/json'});
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = data.filename;
                    a.click();
                    window.URL.revokeObjectURL(url);
                    alert('AI í•™ìŠµ ê³„íšì´ ì„±ê³µì ìœ¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤!');
                } else {
                    alert('ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + data.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
    }

    function retrainModel() {
        if (confirm('ëª¨ë¸ì„ ì¬í›ˆë ¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')) {
            document.getElementById('loadingAnimation').style.display = 'block';

            fetch('/retrain_model', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('loadingAnimation').style.display = 'none';
                    if (data.success) {
                        alert('ëª¨ë¸ ì¬í›ˆë ¨ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        location.reload();
                    } else {
                        alert('ì¬í›ˆë ¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + data.error);
                    }
                })
                .catch(error => {
                    document.getElementById('loadingAnimation').style.display = 'none';
                    console.error('Error:', error);
                    alert('ì¬í›ˆë ¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                });
        }
    }

    // ìš°ì„ ìˆœìœ„ í•­ëª© í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ í‘œì‹œ
    document.querySelectorAll('.priority-item').forEach(item => {
        item.addEventListener('click', function() {
            const subjectName = this.querySelector('.subject-name').textContent.trim();
            const priority = this.querySelector('.priority-badge').textContent.trim();
            const confidence = this.querySelector('.subject-details span:last-child').textContent.trim();

            alert(`ê³¼ëª©: ${subjectName}\nìš°ì„ ìˆœìœ„: ${priority}\n${confidence}\n\ní´ë¦­í•œ ê³¼ëª©ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤.`);
        });
    });
</script>
</body>
</html>